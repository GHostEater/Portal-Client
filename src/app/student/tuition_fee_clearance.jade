//Created by P-FLEX MONEY on 25-Oct-18.
div(ng-controller="TuitionFeeClearanceCtrl as vm").row
  .col-sm-12
    .row.visible-print
      .col-sm-1
        img.center-block(src="img/logo.png" width="80px")
      .col-sm-10.text-center
        h4 FOUNTAIN UNIVERSITY, OSOGBO
        h5 (University of Nasrul-Lahi-Il-Fatih Society)
        h6 {{vm.user.student.major.dept.college.name}}
      .row
        .col-sm-2.col-sm-offset-10
          img.img-responsive.center-block(ng-src="{{vm.user.student.user.img}}" width="50px")
      .row
        span.col-sm-4 Session: {{vm.session.session}}
        span.col-sm-4.col-sm-offset-4 Semester: {{vm.semester.semester}}
          span(ng-show="vm.semester.semester == 1") st Semester
          span(ng-show="vm.semester.semester == 2") nd Semester

      span.row Department: {{vm.user.student.major.dept.name}}
      span.row Major: {{vm.user.student.major.name}}
      span.row Name:&nbsp
        b {{vm.user.student.user.last_name | uppercase}},&nbsp
        span {{vm.user.student.user.first_name}}
      span.row Matric Number: {{vm.user.student.user.username | matricNo}}
  .col-sm-12.text-center
    .panel.panel-primary
      .panel-heading
        .panel-title Tuition Fee Clearance For {{vm.session.session}} Session
      .panel-body
        p Paid: ₦{{vm.paid | number:'0'}} ({{vm.paid_percentage | number:'2'}}%)
        p UnPaid: ₦{{vm.pay_remaining | number:'0'}} ({{vm.pay_remaining_percentage | number:'2'}}%)
        .col-sm-6
          .panel.panel-success(ng-show="vm.pay_status.p40 === true")
            .panel-heading
              .panel-title 1st Semester
            .panel-body
              div(ng-show="vm.pay_status.p40 || vm.pay_status.p60 || vm.pay_status.p100")
                p Cleared For 1st Semester
              div(ng-show="vm.pay_status.p40 === false")
                p Not Cleared For 1st Semester
          .panel.panel-danger(ng-show="vm.pay_status.p40 === false")
            .panel-heading
              .panel-title 1st Semester
            .panel-body
              div(ng-show="vm.pay_status.p40 || vm.pay_status.p60 || vm.pay_status.p100")
                p Cleared For 1st Semester
              div(ng-show="vm.pay_status.p40 === false")
                p Not Cleared For 1st Semester
        .col-sm-6(ng-show="vm.semester.semester == 2")
          .panel.panel-success(ng-show="vm.pay_status.p100")
            .panel-heading
              .panel-title 2nd Semester
            .panel-body
              div(ng-show="vm.pay_status.p100")
                p Cleared For 2nd Semester
              div(ng-show="vm.pay_status.p100 === false")
                p Not Cleared For 2nd Semester
          .panel.panel-danger(ng-show="!vm.pay_status.p100")
            .panel-heading
              .panel-title 2nd Semester
            .panel-body
              div(ng-show="vm.pay_status.p100")
                p Cleared For 2nd Semester
              div(ng-show="vm.pay_status.p100 === false")
                p Not Cleared For 2nd Semester
  .col-sm-12
    .panel.panel-info
      .panel-heading
        .panel-title Tuition Fee Payments
      .panel-body
        .row.content-vert
          .col-sm-6
            input.form-control.input-sm(ng-model="vm.search" placeholder="Search")
        .table-responsive
          table.table.table-striped.table-bordered
            thead
              th Name
              th Order ID
              th Remita Retrieval Reference
              th Amount
              th Session
              th Date
              th Status
            tbody
              tr(ng-repeat="payment in vm.payments | filter:vm.search")
                td {{payment.payment_type.name}}
                td {{payment.order_id}}
                td {{payment.rrr}}
                td(ng-show="payment.amount") ₦{{payment.amount | number:'0'}}
                td(ng-hide="payment.amount") ₦{{payment.payment_type.amount | number:'0'}}
                td {{payment.session.session}}
                td {{payment.date | date:'dd-MMM-yyyy hh:mm:ssa'}}
                td(ng-class="{'bg-success':payment.paid === true,'bg-danger':payment.paid === false && !payment.rrr && payment.status != 'Pending','bg-warning':(payment.rrr || payment.status == 'Pending') && payment.paid == false}").text-white
                  span(ng-show="payment.status") {{payment.status}}
                  br(ng-show="payment.status")
                  br(ng-show="!payment.status")
                  span Paid: {{payment.paid}}
