//Created by P-FLEX MONEY on 03-Dec-18.
div(ng-controller="PaymentValidationCtrl as vm").row
  .col-sm-12
    h3 Payment Revalidation Section
    p This section is meant for student who has payment problem but had received a debit alert on his/her mobile phone. The payment problem can be corrected by selecting the payment type and click  on "Re-Validate Transaction" link against the Payment transaction corresponding to the the Remita Retrieval Reference number received on your mobile phone from the Remita.
    p Note: it is important that you carefully click the type of payment you are attempting to initiate to avoid payment errors
  .col-sm-12
    .panel.panel-info
      .panel-heading
        .panel-title Un-Validated Payments
      .panel-body
        .row.content-vert
          .col-sm-6
            input.form-control.input-sm(ng-model="vm.search" placeholder="Search")
        .table-responsive
          table.table.table-striped.table-bordered
            thead
              th Name
              th Order ID
              th Remita Retrieval Reference
              th Amount
              th Session
              th Level
              th Date
              th Status
              th Action
            tbody
              tr(ng-repeat="payment in vm.payments | filter:vm.search")
                td {{payment.payment_type.name}}
                td {{payment.order_id}}
                td {{payment.rrr}}
                td(ng-show="payment.amount") ₦{{payment.amount | number:'0'}}
                td(ng-hide="payment.amount") ₦{{payment.payment_type.amount | number:'0'}}
                td {{payment.session.session}}
                td {{payment.level.level}}
                td {{payment.date | date:'dd-MMM-yyyy hh:mm:ssa'}}
                td(ng-class="{'bg-success':payment.paid === true,'bg-danger':payment.paid === false && !payment.rrr && payment.status != 'Pending','bg-warning':(payment.rrr || payment.status == 'Pending') && payment.paid == false}").text-white
                  span(ng-show="payment.status") {{payment.status}}
                  br(ng-show="payment.status")
                  br(ng-show="!payment.status")
                  span Paid: {{payment.paid}}
                td
                  div(ng-show="payment.paid === false")
                    button.btn.btn-xs.btn-success(ng-click="vm.check_status(payment)" ) Re-Validate Transaction
                    a.btn.btn-xs.btn-primary(ui-sref="payment_reference({id:payment.id})") View/Print Remita Payment Reference
                  div(ng-show="payment.paid === true")
                    a.btn.btn-xs.btn-primary(ui-sref="payment_receipt({id:payment.id})") View/Print Payment Receipt
